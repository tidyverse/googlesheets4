<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Using googlesheets4 with googledrive • googlesheets4</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_Pro-0.4.9/font.css" rel="stylesheet">
<link href="../deps/Source_Code_Pro-0.4.9/font.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Using googlesheets4 with googledrive">
<meta name="robots" content="noindex">
<script defer data-domain="googlesheets4.tidyverse.org,all.tidyverse.org" src="https://plausible.io/js/plausible.js"></script>
</head>
<body>
    <a href="#container" class="visually-hidden-focusable">Skip to content</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-none" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">googlesheets4</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">1.1.1.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/googlesheets4.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/read-sheets.html">Read Sheets</a></li>
    <li><a class="dropdown-item" href="../articles/write-sheets.html">Write Sheets</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Special topics</h6></li>
    <li><a class="dropdown-item" href="../articles/auth.html">googlesheets4 auth</a></li>
    <li><a class="dropdown-item" href="../articles/dates-and-times.html">Dates and times</a></li>
    <li><a class="dropdown-item" href="../articles/find-identify-sheets.html">Find and identify Sheets</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Connections to other packages</h6></li>
    <li><a class="dropdown-item" href="../articles/drive-and-sheets.html">Using googlesheets4 with googledrive</a></li>
    <li><a class="dropdown-item" href="../articles/fun-with-googledrive-and-readxl.html">Fun with googledrive and readxl</a></li>
    <li><a class="dropdown-item" href="../articles/googlesheets4-reprex.html">How to create a googlesheets4 reprex</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../articles/index.html">More articles...</a></li>
  </ul>
</li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-news" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">News</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-news">
<li><h6 class="dropdown-header" data-toc-skip>Releases</h6></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/blog/2021/07/googlesheets4-1-0-0/">googlesheets4 1.0.0</a></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/blog/2020/05/googlesheets4-0-2-0/">googlesheets4 0.2.0</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../news/index.html">Changelog</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/tidyverse/googlesheets4/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article" id="container">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Using googlesheets4 with googledrive</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/tidyverse/googlesheets4/blob/main/vignettes/articles/drive-and-sheets.Rmd" class="external-link"><code>vignettes/articles/drive-and-sheets.Rmd</code></a></small>
      <div class="d-none name"><code>drive-and-sheets.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="why-use-googlesheets4-and-googledrive-together">Why use googlesheets4 and googledrive together?<a class="anchor" aria-label="anchor" href="#why-use-googlesheets4-and-googledrive-together"></a>
</h2>
<p>googlesheets4 wraps the Sheets API v4, which lets you read, write,
and format data in Sheets. The Sheets API is very focused on
spreadsheet-oriented data and metadata, i.e. (work)sheets and cells.</p>
<p>The Sheets API offers practically no support for file-level
operations, other than basic spreadsheet creation. There is no way to
delete, copy, or rename a Sheet or to place it in a folder or to change
its sharing permissions. We must use the Drive API for all of this,
which is wrapped by the googledrive package (<a href="https://googledrive.tidyverse.org" class="external-link uri">https://googledrive.tidyverse.org</a>).</p>
<p>Another reason to use the googlesheets4 and googledrive packages
together is for ease of file (Sheet) identification. The googlesheets4
package requires you to specify the target Sheet by its ID, not by its
<em>name</em>. That’s because the underlying APIs only accept file IDs.
But the googledrive package offers lots of support for navigating
between human-friendly file names and their associated IDs. This support
applies to all files on Drive and, specifically, to Sheets.</p>
<p>Therefore, it is common to use googledrive and googlesheets4 together
in a script or app.</p>
</div>
<div class="section level2">
<h2 id="coordinating-auth">Coordinating auth<a class="anchor" aria-label="anchor" href="#coordinating-auth"></a>
</h2>
<p>How does auth work if you’re using googlesheets4 <strong>and</strong>
googledrive? The path of least resistance is to do nothing and just let
each package deal with its own auth. This works fine! But it’s a bit
clunky and you need to make sure you’re using the same Google identity
(email) with each package/API.</p>
<p>It can be nicer to be proactive about auth and use the same token for
your googledrive and googlesheets4 work. Below we show a couple of ways
to do this.</p>
</div>
<div class="section level2">
<h2 id="auth-with-googledrive-first-then-googlesheets4">Auth with googledrive first, then googlesheets4<a class="anchor" aria-label="anchor" href="#auth-with-googledrive-first-then-googlesheets4"></a>
</h2>
<p>Outline:</p>
<ul>
<li>Make sure auth happens first with googledrive, probably by calling
<code><a href="https://googledrive.tidyverse.org/reference/drive_auth.html" class="external-link">googledrive::drive_auth()</a></code> yourself. The default scope is
<code>"https://www.googleapis.com/auth/drive"</code>, which is
sufficient for all your Drive and Sheets work.</li>
<li>Tell googlesheets4 to use the same token as googledrive.</li>
</ul>
<p>First attach both packages.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://googledrive.tidyverse.org" class="external-link">googledrive</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://googlesheets4.tidyverse.org">googlesheets4</a></span><span class="op">)</span></span></code></pre></div>
<p>Do auth first with googledrive. Remember
<code><a href="https://googledrive.tidyverse.org/reference/drive_auth.html" class="external-link">googledrive::drive_auth()</a></code> accepts additional arguments,
e.g. to specify a Google identity via <code>email =</code> or to use a
service account via <code>path =</code>. Then direct googlesheets4 to
use the same token as googledrive.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://googledrive.tidyverse.org/reference/drive_auth.html" class="external-link">drive_auth</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/gs4_auth.html">gs4_auth</a></span><span class="op">(</span>token <span class="op">=</span> <span class="fu"><a href="https://googledrive.tidyverse.org/reference/drive_token.html" class="external-link">drive_token</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Now you can use googledrive functions, like
<code><a href="https://googledrive.tidyverse.org/reference/drive_find.html" class="external-link">googledrive::drive_find()</a></code> or
<code><a href="https://googledrive.tidyverse.org/reference/drive_get.html" class="external-link">googledrive::drive_get()</a></code>, to list files or find them by
name, path, or other property. Then, once you’ve identified the target
file, use googlesheets4 to do spreadsheet-specific tasks.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://googledrive.tidyverse.org/reference/drive_find.html" class="external-link">drive_find</a></span><span class="op">(</span><span class="st">"chicken"</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A dribble: 1 × 3</span></span></span>
<span><span class="co">#&gt;   name          id       drive_resource   </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;drv_id&gt;</span> <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> chicken-sheet 1StV8oq… <span style="color: #949494;">&lt;named list [35]&gt;</span></span></span>
<span></span>
<span><span class="va">ss</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://googledrive.tidyverse.org/reference/drive_get.html" class="external-link">drive_get</a></span><span class="op">(</span><span class="st">"chicken-sheet"</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> The input `path` resolved to exactly 1 file.</span></span>
<span></span>
<span><span class="fu"><a href="../reference/gs4_get.html">gs4_get</a></span><span class="op">(</span><span class="va">ss</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">&lt;googlesheets4_spreadsheet&gt;</span> <span style="color: #00BBBB;">────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; Spreadsheet name: <span style="color: #00BBBB;">chicken-sheet</span>                               </span></span>
<span><span class="co">#&gt;               ID: 1StV8oqHa0SVo58ztLGPH5mDMMHIBsiF6VO5GUJjM7u0</span></span>
<span><span class="co">#&gt;           Locale: en_US                                       </span></span>
<span><span class="co">#&gt;        Time zone: America/Los_Angeles                         </span></span>
<span><span class="co">#&gt;      # of sheets: 1                                           </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">&lt;sheets&gt;</span> <span style="color: #00BBBB;">───────────────────────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; (Sheet name): (Nominal extent in rows x columns)</span></span>
<span><span class="co">#&gt;  <span style="color: #00BB00;">chicken.csv</span>: 1000 x 26</span></span>
<span></span>
<span><span class="fu"><a href="../reference/range_read.html">read_sheet</a></span><span class="op">(</span><span class="va">ss</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> Reading from <span style="color: #00BBBB;">chicken-sheet</span>.</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> Range <span style="color: #BBBB00;">chicken.csv</span>.</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 5 × 4</span></span></span>
<span><span class="co">#&gt;   chicken                 breed            sex     motto               </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>               </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> Foghorn Leghorn         Leghorn          rooster That's a joke, ah s…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> Chicken Little          unknown          hen     The sky is falling! </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> Ginger                  Rhode Island Red hen     Listen. We'll eithe…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> Camilla the Chicken     Chantecler       hen     Bawk, buck, ba-gawk.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> Ernie The Giant Chicken Brahma           rooster Put Captain Solo in…</span></span></code></pre></div>
<p>If you ever want to confirm the currently authenticated user, both
packages provide a <code>*_user()</code> function that reveals some
info:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://googledrive.tidyverse.org/reference/drive_user.html" class="external-link">drive_user</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Logged in as:</span></span>
<span><span class="co">#&gt; • displayName:</span></span>
<span><span class="co">#&gt;   <span style="color: #00BB00;">googlesheets4-dev-docs@robust-fin-276504.iam.gserviceaccount.com</span></span></span>
<span><span class="co">#&gt; • emailAddress:</span></span>
<span><span class="co">#&gt;   <span style="color: #0000BB;">googlesheets4-dev-docs@robust-fin-276504.iam.gserviceaccount.com</span></span></span>
<span><span class="fu"><a href="../reference/gs4_user.html">gs4_user</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Logged in to <span style="color: #0000BB;">googlesheets4</span> as</span></span>
<span><span class="co">#&gt;   <span style="color: #0000BB;">googlesheets4-dev-docs@robust-fin-276504.iam.gserviceaccount.com</span>.</span></span></code></pre></div>
<p>We are using a service account to render this article. But if you’ve
used the default OAuth flow, this should correspond to the email of the
Google account you logged in with.</p>
</div>
<div class="section level2">
<h2 id="auth-with-googlesheets4-first-then-googledrive">Auth with googlesheets4 first, then googledrive<a class="anchor" aria-label="anchor" href="#auth-with-googlesheets4-first-then-googledrive"></a>
</h2>
<p>Outline:</p>
<ul>
<li>Proactively auth with googlesheets4 and specify the
<code>"https://www.googleapis.com/auth/drive"</code> scope. The default
googlesheets4 scope is
<code>"https://www.googleapis.com/auth/spreadsheets"</code>, which is
insufficient for general work with the Drive API.</li>
<li>Tell googledrive to use the same token as googlesheets4.</li>
</ul>
<p>First attach both packages.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://googlesheets4.tidyverse.org">googlesheets4</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://googledrive.tidyverse.org" class="external-link">googledrive</a></span><span class="op">)</span></span></code></pre></div>
<p>Do auth first with googlesheets4, specifying a Drive scope. Remember
<code><a href="../reference/gs4_auth.html">gs4_auth()</a></code> accepts additional arguments, e.g. to specify a
Google identity via <code>email =</code> or to use a service account via
<code>path =</code>. Then direct googledrive to use the same token as
googlesheets4.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/gs4_auth.html">gs4_auth</a></span><span class="op">(</span>scope <span class="op">=</span> <span class="st">"https://www.googleapis.com/auth/drive"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://googledrive.tidyverse.org/reference/drive_auth.html" class="external-link">drive_auth</a></span><span class="op">(</span>token <span class="op">=</span> <span class="fu"><a href="../reference/gs4_token.html">gs4_token</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Now you can use googledrive functions to list files or find them by
name, path, or other property. Then, once you’ve identified the target
file, use googlesheets4 to do spreadsheet-specific tasks.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://googledrive.tidyverse.org/reference/drive_find.html" class="external-link">drive_find</a></span><span class="op">(</span><span class="st">"chicken"</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A dribble: 1 × 3</span></span></span>
<span><span class="co">#&gt;   name          id       drive_resource   </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;drv_id&gt;</span> <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> chicken-sheet 1StV8oq… <span style="color: #949494;">&lt;named list [35]&gt;</span></span></span>
<span></span>
<span><span class="va">ss</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://googledrive.tidyverse.org/reference/drive_get.html" class="external-link">drive_get</a></span><span class="op">(</span><span class="st">"chicken-sheet"</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> The input `path` resolved to exactly 1 file.</span></span>
<span></span>
<span><span class="fu"><a href="../reference/gs4_get.html">gs4_get</a></span><span class="op">(</span><span class="va">ss</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">&lt;googlesheets4_spreadsheet&gt;</span> <span style="color: #00BBBB;">────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; Spreadsheet name: <span style="color: #00BBBB;">chicken-sheet</span>                               </span></span>
<span><span class="co">#&gt;               ID: 1StV8oqHa0SVo58ztLGPH5mDMMHIBsiF6VO5GUJjM7u0</span></span>
<span><span class="co">#&gt;           Locale: en_US                                       </span></span>
<span><span class="co">#&gt;        Time zone: America/Los_Angeles                         </span></span>
<span><span class="co">#&gt;      # of sheets: 1                                           </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">&lt;sheets&gt;</span> <span style="color: #00BBBB;">───────────────────────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; (Sheet name): (Nominal extent in rows x columns)</span></span>
<span><span class="co">#&gt;  <span style="color: #00BB00;">chicken.csv</span>: 1000 x 26</span></span>
<span></span>
<span><span class="fu"><a href="../reference/range_read.html">read_sheet</a></span><span class="op">(</span><span class="va">ss</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> Reading from <span style="color: #00BBBB;">chicken-sheet</span>.</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> Range <span style="color: #BBBB00;">chicken.csv</span>.</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 5 × 4</span></span></span>
<span><span class="co">#&gt;   chicken                 breed            sex     motto               </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>               </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> Foghorn Leghorn         Leghorn          rooster That's a joke, ah s…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> Chicken Little          unknown          hen     The sky is falling! </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> Ginger                  Rhode Island Red hen     Listen. We'll eithe…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> Camilla the Chicken     Chantecler       hen     Bawk, buck, ba-gawk.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> Ernie The Giant Chicken Brahma           rooster Put Captain Solo in…</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="scope-savvy">Scope savvy<a class="anchor" aria-label="anchor" href="#scope-savvy"></a>
</h2>
<p>If you only need “read” access to Drive or Sheets, the conservative
thing to do is to specify a read-only scope. This is a great way to
limit the damage anyone can do with the token – you or someone else –
through carelessness or malice. If you are storing a token on a remote
or shared location, it is wise to use the most conservative scope that
still gets the job done.</p>
<p>Here are various scopes relevant to googledrive and googlesheets4 and
what they would allow.</p>
<p><code>drive</code> scope allows reading and writing with Drive and
Sheets APIs. This scope is the most powerful and, therefore, the most
dangerous.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">PACKAGE_auth</span><span class="op">(</span></span>
<span>  <span class="va">...</span>,</span>
<span>  scopes <span class="op">=</span> <span class="st">"https://www.googleapis.com/auth/drive"</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><code>drive.readonly</code> still allows file identification via
Drive and can be combined with <code>spreadsheets</code> if you plan to
edit, create, or delete Sheets.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">PACKAGE_auth</span><span class="op">(</span></span>
<span>  <span class="va">...</span>,</span>
<span>  scopes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="st">"https://www.googleapis.com/auth/drive.readonly"</span>,</span>
<span>    <span class="st">"https://www.googleapis.com/auth/spreadsheets"</span></span>
<span>  <span class="op">)</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>If you are just using Drive to identify Sheets and are only reading
from those Sheets, the <code>drive.readonly</code> scope is sufficient
and means you can’t modify anything by accident.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">PACKAGE_auth</span><span class="op">(</span></span>
<span>  <span class="va">...</span>,</span>
<span>  scopes <span class="op">=</span> <span class="st">"https://www.googleapis.com/auth/drive.readonly"</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>If you are not using Drive at all, i.e. you always identify Sheets by
file ID, and you are only reading from those Sheets, you only need
googlesheets4 and <code>spreadsheets.readonly</code> is sufficient.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/gs4_auth.html">gs4_auth</a></span><span class="op">(</span></span>
<span>  <span class="va">...</span>,</span>
<span>  scopes <span class="op">=</span> <span class="st">"https://www.googleapis.com/auth/spreadsheets.readonly"</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



   </div>
  <footer><div class="container">
  <div class="pkgdown-footer-left">
  <p>Developed by <a href="https://jennybryan.org" class="external-link">Jennifer Bryan</a>, <a href="https://www.posit.co" class="external-link"><img src="https://www.tidyverse.org/posit-logo.svg" alt="Posit" height="16" width="62" style="margin-bottom: 3px;"></a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

  </div></footer>
</body>
</html>
